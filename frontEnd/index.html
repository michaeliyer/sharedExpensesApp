<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pam's Shared Expenses App</title>
    <link rel="stylesheet" href="style.css" />
    <script src="check-auth.js"></script>
  </head>
  <body>
    <header>
      <h1>Shared Expenses</h1>
      <nav>
        <a href="grand-totals.html">View Totals</a>
        <button id="logout-btn" style="display: none">Logout</button>
      </nav>
    </header>
    <main class="container">
      <div class="button-container">
        <button id="add-expense-btn" style="display: none">Add Expense</button>
        <button id="add-deposit-btn" style="display: none">Add Deposit</button>
        <button id="add-category-btn">Add Category</button>
      </div>

      <div id="expense-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2>Add New Expense</h2>
          <form id="expenseForm">
            <select id="name-select"></select>
            <input
              type="text"
              id="new-name"
              placeholder="New Business Name"
              style="display: none"
            />
            <input
              type="number"
              id="amount"
              placeholder="Amount"
              step="0.01"
              required
            />
            <select id="category" required>
              <option value="">Select Category</option>
            </select>
            <input type="date" id="date" required />
            <input
              type="text"
              id="description"
              placeholder="Description (optional)"
            />
            <button type="submit">Add</button>
          </form>
        </div>
      </div>

      <div id="deposit-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2>Add Deposit</h2>
          <form id="deposit-form">
            <input
              type="number"
              id="deposit-amount"
              placeholder="Amount"
              step="0.01"
              required
            />
            <input type="date" id="deposit-date" required />
            <textarea
              id="deposit-description"
              placeholder="Description"
            ></textarea>
            <button type="submit">Add Deposit</button>
          </form>
        </div>
      </div>

      <div id="category-modal" class="modal">
        <div class="modal-content">
          <span class="close-btn">&times;</span>
          <h2>Add New Category</h2>
          <form id="category-form">
            <input
              type="text"
              id="new-category-name"
              placeholder="New Category"
              required
            />
            <button type="submit">Add Category</button>
          </form>
          <button
            id="toggle-category-list"
            class="category-expand-btn"
            style="margin-top: 16px"
          >
            Show/Delete Categories
          </button>
          <ul
            id="modal-category-list"
            style="display: none; margin-top: 16px"
          ></ul>
        </div>
      </div>

      <div class="toggle-container">
        <label class="switch">
          <input type="checkbox" id="toggle-entries" />
          <span class="slider round"></span>
        </label>
        <span>Show All Entries</span>
      </div>

      <div id="entries-table-container">
        <h2>All Entries</h2>
        <table id="entries-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Amount</th>
              <th>Type</th>
              <th>Category</th>
              <th>Date</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div id="search-container">
        <button
          id="toggle-search-btn"
          style="
            background: none;
            border: none;
            cursor: pointer;
            margin-bottom: 10px;
            font-size: 1.5em;
          "
          aria-label="Show Search and Filter"
        >
          <svg
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <circle cx="11" cy="11" r="7" stroke="#0a9396" stroke-width="2" />
            <line
              x1="16.4142"
              y1="16"
              x2="21"
              y2="20.5858"
              stroke="#0a9396"
              stroke-width="2"
              stroke-linecap="round"
            />
          </svg>
        </button>
        <div id="search-toggle-group" style="display: none">
          <div id="search-filter-panel">
            <h2>Search and Filter</h2>
            <form id="search-form">
              <select id="search-name-select" class="search-select">
                <option value="">Name/Business</option>
              </select>
              <input type="month" id="search-month" />
              <input type="date" id="search-start-date" />
              <input type="date" id="search-end-date" />
              <select id="search-category"></select>
              <select id="search-type">
                <option value="">All Types</option>
                <option value="expense">Expense</option>
                <option value="deposit">Deposit</option>
              </select>
              <button type="submit">Search</button>
            </form>
          </div>
          <div id="search-results-container">
            <h2>Search Results</h2>
            <table id="search-results-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Amount</th>
                  <th>Type</th>
                  <th>Category</th>
                  <th>Date</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody></tbody>
            </table>
          </div>
        </div>
      </div>
    </main>

    <script src="script.js"></script>
  </body>
</html>
